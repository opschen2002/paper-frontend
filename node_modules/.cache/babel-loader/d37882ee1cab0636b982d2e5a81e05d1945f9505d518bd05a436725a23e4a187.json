{"ast":null,"code":"import { ref, reactive } from 'vue';\nimport DataTable from '@/components/common/DataTable.vue';\nimport { teacherApi } from '@/api';\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'QueryView',\n  components: {\n    DataTable\n  },\n  setup() {\n    const loading = ref(false);\n    const studentList = ref([]);\n    const total = ref(0);\n    const queryForm = reactive({\n      className: '',\n      college: '',\n      page: 1\n    });\n    const handleQuery = async () => {\n      try {\n        loading.value = true;\n        const res = await teacherApi.queryStudents(queryForm);\n        studentList.value = res.list || [];\n        total.value = res.total || 0;\n      } catch (error) {\n        ElMessage.error('查询失败');\n      } finally {\n        loading.value = false;\n      }\n    };\n    const handlePageChange = page => {\n      queryForm.page = page;\n      handleQuery();\n    };\n    return {\n      loading,\n      studentList,\n      total,\n      queryForm,\n      handleQuery,\n      handlePageChange\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","DataTable","teacherApi","ElMessage","name","components","setup","loading","studentList","total","queryForm","className","college","page","handleQuery","value","res","queryStudents","list","error","handlePageChange"],"sources":["C:\\Users\\陈章宇\\Desktop\\test\\分步骤完成\\v7\\frontend\\paper-frontend\\src\\views\\teacher\\QueryView.vue"],"sourcesContent":["<template>\n  <div class=\"query-container\">\n    <el-card>\n      <template #header>\n        <el-form :inline=\"true\" :model=\"queryForm\">\n          <el-form-item label=\"班级\">\n            <el-input v-model=\"queryForm.className\" placeholder=\"请输入班级\" />\n          </el-form-item>\n          <el-form-item label=\"学院\">\n            <el-input v-model=\"queryForm.college\" placeholder=\"请输入学院\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"handleQuery\">查询</el-button>\n          </el-form-item>\n        </el-form>\n      </template>\n\n      <DataTable\n        :loading=\"loading\"\n        :table-data=\"studentList\"\n        :total=\"total\"\n        @page-change=\"handlePageChange\"\n      >\n        <el-table-column prop=\"studentId\" label=\"学号\" />\n        <el-table-column prop=\"name\" label=\"姓名\" />\n        <el-table-column prop=\"className\" label=\"班级\" />\n        <el-table-column prop=\"college\" label=\"学院\" />\n        <el-table-column prop=\"gender\" label=\"性别\">\n          <template #default=\"{ row }\">\n            {{ row.gender === 'male' ? '男' : '女' }}\n          </template>\n        </el-table-column>\n      </DataTable>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive } from 'vue'\nimport DataTable from '@/components/common/DataTable.vue'\nimport { teacherApi } from '@/api'\nimport { ElMessage } from 'element-plus'\n\nexport default {\n  name: 'QueryView',\n  components: { DataTable },\n  setup() {\n    const loading = ref(false)\n    const studentList = ref([])\n    const total = ref(0)\n    \n    const queryForm = reactive({\n      className: '',\n      college: '',\n      page: 1\n    })\n\n    const handleQuery = async () => {\n      try {\n        loading.value = true\n        const res = await teacherApi.queryStudents(queryForm)\n        studentList.value = res.list || []\n        total.value = res.total || 0\n      } catch (error) {\n        ElMessage.error('查询失败')\n      } finally {\n        loading.value = false\n      }\n    }\n\n    const handlePageChange = (page) => {\n      queryForm.page = page\n      handleQuery()\n    }\n\n    return {\n      loading,\n      studentList,\n      total,\n      queryForm,\n      handleQuery,\n      handlePageChange\n    }\n  }\n}\n</script>"],"mappings":"AAsCA,SAASA,GAAG,EAAEC,QAAO,QAAS,KAAI;AAClC,OAAOC,SAAQ,MAAO,mCAAkC;AACxD,SAASC,UAAS,QAAS,OAAM;AACjC,SAASC,SAAQ,QAAS,cAAa;AAEvC,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IAAEJ;EAAU,CAAC;EACzBK,KAAKA,CAAA,EAAG;IACN,MAAMC,OAAM,GAAIR,GAAG,CAAC,KAAK;IACzB,MAAMS,WAAU,GAAIT,GAAG,CAAC,EAAE;IAC1B,MAAMU,KAAI,GAAIV,GAAG,CAAC,CAAC;IAEnB,MAAMW,SAAQ,GAAIV,QAAQ,CAAC;MACzBW,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,EAAE;MACXC,IAAI,EAAE;IACR,CAAC;IAED,MAAMC,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACFP,OAAO,CAACQ,KAAI,GAAI,IAAG;QACnB,MAAMC,GAAE,GAAI,MAAMd,UAAU,CAACe,aAAa,CAACP,SAAS;QACpDF,WAAW,CAACO,KAAI,GAAIC,GAAG,CAACE,IAAG,IAAK,EAAC;QACjCT,KAAK,CAACM,KAAI,GAAIC,GAAG,CAACP,KAAI,IAAK;MAC7B,EAAE,OAAOU,KAAK,EAAE;QACdhB,SAAS,CAACgB,KAAK,CAAC,MAAM;MACxB,UAAU;QACRZ,OAAO,CAACQ,KAAI,GAAI,KAAI;MACtB;IACF;IAEA,MAAMK,gBAAe,GAAKP,IAAI,IAAK;MACjCH,SAAS,CAACG,IAAG,GAAIA,IAAG;MACpBC,WAAW,CAAC;IACd;IAEA,OAAO;MACLP,OAAO;MACPC,WAAW;MACXC,KAAK;MACLC,SAAS;MACTI,WAAW;MACXM;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}