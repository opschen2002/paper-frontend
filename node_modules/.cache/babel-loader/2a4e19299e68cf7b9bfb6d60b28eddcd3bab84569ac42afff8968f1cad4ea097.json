{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createBlock as _createBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"scores-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_DataTable = _resolveComponent(\"DataTable\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_ScoreCard = _resolveComponent(\"ScoreCard\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, null, {\n    header: _withCtx(() => _cache[3] || (_cache[3] = [_createElementVNode(\"div\", {\n      class: \"card-header\"\n    }, [_createElementVNode(\"h3\", null, \"成绩查询\")], -1 /* HOISTED */)])),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      inline: true,\n      model: $setup.queryForm,\n      class: \"search-form\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"班级\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.queryForm.className,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.queryForm.className = $event),\n          placeholder: \"请输入班级\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"时间范围\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_date_picker, {\n          modelValue: $setup.queryForm.dateRange,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.queryForm.dateRange = $event),\n          type: \"daterange\",\n          \"range-separator\": \"至\",\n          \"start-placeholder\": \"开始日期\",\n          \"end-placeholder\": \"结束日期\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $setup.handleQuery\n        }, {\n          default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"查询\")])),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"]), _createVNode(_component_DataTable, {\n      loading: $setup.loading,\n      \"table-data\": $setup.scoreList,\n      total: $setup.total,\n      onPageChange: $setup.handlePageChange\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"studentId\",\n        label: \"学号\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"name\",\n        label: \"姓名\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"className\",\n        label: \"班级\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"testDate\",\n        label: \"测试日期\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createTextVNode(_toDisplayString($setup.formatDate(row.testDate)), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"totalScore\",\n        label: \"总分\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          link: \"\",\n          onClick: $event => $setup.handleViewDetail(row)\n        }, {\n          default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\" 查看详情 \")])),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"loading\", \"table-data\", \"total\", \"onPageChange\"])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 详情对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.dialogVisible,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.dialogVisible = $event),\n    title: \"成绩详情\",\n    width: \"50%\"\n  }, {\n    default: _withCtx(() => [$setup.currentScore ? (_openBlock(), _createBlock(_component_ScoreCard, {\n      key: 0,\n      \"score-data\": $setup.currentScore,\n      editable: false\n    }, null, 8 /* PROPS */, [\"score-data\"])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_cache","_createElementVNode","default","_component_el_form","inline","model","$setup","queryForm","_component_el_form_item","label","_component_el_input","modelValue","className","$event","placeholder","_","_component_el_date_picker","dateRange","type","_component_el_button","onClick","handleQuery","_createTextVNode","_component_DataTable","loading","scoreList","total","onPageChange","handlePageChange","_component_el_table_column","prop","row","_toDisplayString","formatDate","testDate","link","handleViewDetail","_createCommentVNode","_component_el_dialog","dialogVisible","title","width","currentScore","_createBlock","_component_ScoreCard","key","editable"],"sources":["C:\\Users\\陈章宇\\Desktop\\test\\分步骤完成\\v7\\frontend\\paper-frontend\\src\\views\\teacher\\ScoresView.vue"],"sourcesContent":["<template>\r\n  <div class=\"scores-container\">\r\n    <el-card>\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <h3>成绩查询</h3>\r\n        </div>\r\n      </template>\r\n\r\n      <el-form :inline=\"true\" :model=\"queryForm\" class=\"search-form\">\r\n        <el-form-item label=\"班级\">\r\n          <el-input v-model=\"queryForm.className\" placeholder=\"请输入班级\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"时间范围\">\r\n          <el-date-picker\r\n            v-model=\"queryForm.dateRange\"\r\n            type=\"daterange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleQuery\">查询</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <DataTable\r\n        :loading=\"loading\"\r\n        :table-data=\"scoreList\"\r\n        :total=\"total\"\r\n        @page-change=\"handlePageChange\"\r\n      >\r\n        <el-table-column prop=\"studentId\" label=\"学号\" />\r\n        <el-table-column prop=\"name\" label=\"姓名\" />\r\n        <el-table-column prop=\"className\" label=\"班级\" />\r\n        <el-table-column prop=\"testDate\" label=\"测试日期\">\r\n          <template #default=\"{ row }\">\r\n            {{ formatDate(row.testDate) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"totalScore\" label=\"总分\" />\r\n        <el-table-column label=\"操作\">\r\n          <template #default=\"{ row }\">\r\n            <el-button type=\"primary\" link @click=\"handleViewDetail(row)\">\r\n              查看详情\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </DataTable>\r\n    </el-card>\r\n\r\n    <!-- 详情对话框 -->\r\n    <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      title=\"成绩详情\"\r\n      width=\"50%\"\r\n    >\r\n      <ScoreCard\r\n        v-if=\"currentScore\"\r\n        :score-data=\"currentScore\"\r\n        :editable=\"false\"\r\n      />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive } from 'vue'\r\nimport DataTable from '@/components/common/DataTable.vue'\r\nimport ScoreCard from '@/components/common/ScoreCard.vue'\r\nimport { teacherApi } from '@/api'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'ScoresView',\r\n  components: {\r\n    DataTable,\r\n    ScoreCard\r\n  },\r\n  setup() {\r\n    const loading = ref(false)\r\n    const scoreList = ref([])\r\n    const total = ref(0)\r\n    const dialogVisible = ref(false)\r\n    const currentScore = ref(null)\r\n\r\n    const queryForm = reactive({\r\n      className: '',\r\n      dateRange: null,\r\n      page: 1\r\n    })\r\n\r\n    const handleQuery = async () => {\r\n      try {\r\n        loading.value = true\r\n        let res\r\n        if (queryForm.dateRange && queryForm.dateRange.length === 2) {\r\n          res = await teacherApi.getScoresByDateRange(\r\n            queryForm.dateRange[0],\r\n            queryForm.dateRange[1]\r\n          )\r\n        } else {\r\n          res = await teacherApi.getClassScores(queryForm.className)\r\n        }\r\n        scoreList.value = res.list || []\r\n        total.value = res.total || 0\r\n      } catch (error) {\r\n        ElMessage.error('查询失败')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const handlePageChange = (page) => {\r\n      queryForm.page = page\r\n      handleQuery()\r\n    }\r\n\r\n    const handleViewDetail = (row) => {\r\n      currentScore.value = row\r\n      dialogVisible.value = true\r\n    }\r\n\r\n    const formatDate = (date) => {\r\n      if (!date) return ''\r\n      return new Date(date).toLocaleDateString()\r\n    }\r\n\r\n    return {\r\n      loading,\r\n      scoreList,\r\n      total,\r\n      queryForm,\r\n      dialogVisible,\r\n      currentScore,\r\n      handleQuery,\r\n      handlePageChange,\r\n      handleViewDetail,\r\n      formatDate\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.scores-container {\r\n  padding: 20px;\r\n}\r\n\r\n.search-form {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}